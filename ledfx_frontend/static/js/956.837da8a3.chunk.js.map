{"version":3,"file":"static/js/956.837da8a3.chunk.js","mappings":"MAUA,IAAIA,EAA+C,KAEnDC,KAAKC,UAAYC,eAAgBC,GAC/B,MAAM,OAAEC,EAAM,SAAEC,EAAQ,QAAEC,EAAO,mBAAEC,EAAkB,cAAEC,EAAa,IAAEC,GAAQN,EAAEO,KAEjE,UAAXN,EACY,OAAVL,IACFA,EAAQY,YAAYT,UAClB,IAAIU,EAAYL,EAAqB,EACrC,GAAIK,GAAaN,EAAQO,OAAQ,CAC/B,IAAIL,EAIF,YADAR,KAAKc,YAAY,CAAEV,OAAQ,SAF3BQ,EAAY,CAKhB,CAEA,MAAMG,EAAcT,EAAQM,GAC5B,UACQI,MAAMP,EAAM,cAAe,CAC/BQ,OAAQ,MACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,GAAIP,EACJX,OAAQ,eAGZJ,KAAKc,YAAY,CAAEV,OAAQ,eAAgBQ,aAC7C,CAAE,MAAOW,GACPC,QAAQD,MAAM,4BAA6BA,EAC7C,GACClB,IAEe,SAAXD,GACK,OAAVL,IACF0B,cAAc1B,GACdA,EAAQ,KAGd,C","sources":["workers/timerWorker.ts"],"sourcesContent":["/* eslint-disable no-restricted-globals */\r\ninterface WorkerMessageTimer {\r\n  action: 'start' | 'stop'\r\n  interval: number\r\n  scenePL: string[]\r\n  scenePLactiveIndex: number\r\n  scenePLrepeat: boolean\r\n  url: string\r\n}\r\n\r\nlet timer: ReturnType<typeof setInterval> | null = null\r\n\r\nself.onmessage = async function (e: MessageEvent<WorkerMessageTimer>) {\r\n  const { action, interval, scenePL, scenePLactiveIndex, scenePLrepeat, url } = e.data\r\n\r\n  if (action === 'start') {\r\n    if (timer === null) {\r\n      timer = setInterval(async () => {\r\n        let nextIndex = scenePLactiveIndex + 1\r\n        if (nextIndex >= scenePL.length) {\r\n          if (scenePLrepeat) {\r\n            nextIndex = 0\r\n          } else {\r\n            self.postMessage({ action: 'stop' })\r\n            return\r\n          }\r\n        }\r\n\r\n        const nextSceneId = scenePL[nextIndex]\r\n        try {\r\n          await fetch(url + '/api/scenes', {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n              id: nextSceneId,\r\n              action: 'activate'\r\n            })\r\n          })\r\n          self.postMessage({ action: 'sceneChanged', nextIndex })\r\n        } catch (error) {\r\n          console.error('Failed to activate scene:', error)\r\n        }\r\n      }, interval)\r\n    }\r\n  } else if (action === 'stop') {\r\n    if (timer !== null) {\r\n      clearInterval(timer)\r\n      timer = null\r\n    }\r\n  }\r\n}\r\n"],"names":["timer","self","onmessage","async","e","action","interval","scenePL","scenePLactiveIndex","scenePLrepeat","url","data","setInterval","nextIndex","length","postMessage","nextSceneId","fetch","method","headers","body","JSON","stringify","id","error","console","clearInterval"],"sourceRoot":""}